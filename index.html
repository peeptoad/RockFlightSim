<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rocket Flight Simulator</title>
    <style>
        label {
            display: block;
            margin-bottom: 5px;
        }
        input {
            margin-bottom: 10px;
        }
        button {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>Rocket Flight Simulator</h1>
    
    <!-- Rocket Parameters -->
    <h2>Rocket Parameters</h2>
    <div>
        <label for="rocketLength">Rocket Length (meters):</label>
        <input type="number" id="rocketLength" min="0">
    </div>
    <div>
        <label for="rocketDiameter">Rocket Diameter (meters):</label>
        <input type="number" id="rocketDiameter" min="0">
    </div>
    <div>
        <label for="rocketWeight">Rocket Weight (kg):</label>
        <input type="number" id="rocketWeight" min="0">
    </div>
    
    <!-- Engine Characteristics -->
    <h2>Engine Characteristics</h2>
    <div>
        <label for="burnTime">Burn Time (seconds):</label>
        <input type="number" id="burnTime" min="0">
    </div>
    <div id="thrustCurveInputs">
        <label>Thrust Curve:</label>
        <div>
            <input type="number" class="timeInput" placeholder="Time (seconds)">
            <input type="number" class="thrustInput" placeholder="Thrust (Newtons)">
        </div>
    </div>
    <button onclick="addThrustDataPoint()">Add Data Point</button>
    
    <!-- Atmospheric Conditions -->
    <h2>Atmospheric Conditions</h2>
    <div>
        <label for="airDensity">Air Density (kg/mÂ³):</label>
        <input type="number" id="airDensity" value="1.225" min="0">
    </div>
    <div>
        <label for="windSpeed">Wind Speed (m/s):</label>
        <input type="number" id="windSpeed" value="0">
    </div>
    
    <!-- Buttons -->
    <button onclick="simulateFlight()">Simulate Flight</button>

    <!-- Results -->
    <h2>Results</h2>
    <div>
        <label for="altitude">Altitude (meters):</label>
        <span id="altitude"></span>
    </div>
    <div>
        <label for="speed">Speed (m/s):</label>
        <span id="speed"></span>
    </div>

    <!-- Script -->
    <script>
        let thrustCurve = []; // Array to store thrust curve data

        // Function to add a new data point to the thrust curve
        function addThrustDataPoint() {
            let timeInput = document.createElement('input');
            timeInput.type = 'number';
            timeInput.className = 'timeInput';
            timeInput.placeholder = 'Time (seconds)';

            let thrustInput = document.createElement('input');
            thrustInput.type = 'number';
            thrustInput.className = 'thrustInput';
            thrustInput.placeholder = 'Thrust (Newtons)';

            document.getElementById('thrustCurveInputs').appendChild(timeInput);
            document.getElementById('thrustCurveInputs').appendChild(thrustInput);
        }

        // Function to simulate rocket flight
        function simulateFlight() {
            // Retrieve rocket parameters and engine characteristics
            let rocketLength = parseFloat(document.getElementById('rocketLength').value);
            let rocketDiameter = parseFloat(document.getElementById('rocketDiameter').value);
            let rocketWeight = parseFloat(document.getElementById('rocketWeight').value);
            let burnTime = parseFloat(document.getElementById('burnTime').value);
            let airDensity = parseFloat(document.getElementById('airDensity').value);
            let windSpeed = parseFloat(document.getElementById('windSpeed').value);

            // Validate inputs
            if (isNaN(rocketLength) || isNaN(rocketDiameter) || isNaN(rocketWeight) ||
                isNaN(burnTime) || isNaN(airDensity) || isNaN(windSpeed)) {
                alert("Please enter valid numeric values for all rocket parameters.");
                return;
            }

            // Retrieve thrust curve data
            let timeInputs = document.querySelectorAll('.timeInput');
            let thrustInputs = document.querySelectorAll('.thrustInput');

            thrustCurve = []; // Clear previous data
            for (let i = 0; i < timeInputs.length; i++) {
                let time = parseFloat(timeInputs[i].value);
                let thrust = parseFloat(thrustInputs[i].value);
                if (!isNaN(time) && !isNaN(thrust)) {
                    thrustCurve.push({ time, thrust });
                }
            }

            // Simulation logic using thrust curve data
            let dt = 0.1; // Time step (seconds)
            let altitude = 0;
            let speed = 0;

            for (let t = 0; t < burnTime; t += dt) {
                let thrust = getThrust(t); // Interpolate thrust from thrust curve
                let dragForce = 0.5 * airDensity * Math.PI * (rocketDiameter / 2) ** 2 * speed ** 2;
                let netForce = thrust - dragForce;
                let acceleration = netForce / rocketWeight;
                speed += acceleration * dt;
                altitude += speed * dt;
                altitude += windSpeed * dt;
            }

            // Display results
            document.getElementById('altitude').textContent = altitude.toFixed(2);
            document.getElementById('speed').textContent = speed.toFixed(2);
        }

        // Function to interpolate thrust from thrust curve
        function getThrust(time) {
            for (let i = 0; i < thrustCurve.length - 1; i++) {
                if (thrustCurve[i].time <= time && time <= thrustCurve[i + 1].time) {
                    let t1 = thrustCurve[i].time;
                    let t2 = thrustCurve[i + 1].time;
                    let thrust1 = thrustCurve[i].thrust;
                    let thrust2 = thrustCurve[i + 1].thrust;
                    let slope = (thrust2 - thrust1) / (t2 - t1);
                    return thrust1 + slope * (time - t1);
                }
            }
            return 0; // Default to zero thrust if no data is available
        }
    </script>
</body>
</html>

